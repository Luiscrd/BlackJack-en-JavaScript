(()=>{"use strict";let s=[],e=["C","D","H","S"],a=["J","Q","K","A"],t={puntos:0,cartas:[],valores:[],useAs:!1},n={puntos:0,cartas:[],valores:[],useAs:!1},r=document.querySelector("#btnPedir"),u=document.querySelector("#btnEmpezar"),p=document.querySelector("#btnDetener"),l=document.querySelector("#btnNuevo"),c=document.querySelector("#puntosJugador"),o=document.querySelector("#jugador-cartas"),i=document.querySelector("#puntosDealer"),d=document.querySelector("#dealer-cartas"),h=()=>{for(let t=2;t<=10;t++)for(let n of e)s.push(t+n);for(let r of e)for(let u of a)s.push(u+r);return _.shuffle(s)};h();let m=()=>{if(0===s.length)throw"No quedan m\xe1s cartas en la baraja";let e=Math.floor(Math.random()*s.length),a=s.splice(e,1);return a[0]},$=s=>{let e=s.substring(0,s.length-1);return isNaN(e)?"A"===e?11:10:Number(e)},N;r.disabled=!0,p.disabled=!0,u.addEventListener("click",()=>{let s=m();t.cartas.push(s),t.valores.push($(s)),t.puntos+=$(s),c.innerText=t.puntos;let e=document.createElement("img");e.src=`assets/cartas/${s}.png`,e.className="carta",o.append(e),setTimeout(()=>{let s=m();"A"===s.substring(0,s.length-1)?t.puntos+$(s)>21?(t.cartas.push(s),t.valores.push($(s)),t.puntos+=1):(t.cartas.push(s),t.puntos+=11,t.valores.push($(s))):t.valores.includes(11)&&!t.useAs&&t.puntos+$(s)>21?(t.cartas.push(s),t.valores.push($(s)),t.puntos+=$(s)-10,t.useAs=!0):(t.cartas.push(s),t.valores.push($(s)),t.puntos+=$(s)),21===t.puntos?(c.className="blackjack",c.innerText=t.puntos+" - BackJack"):c.innerText=t.puntos;let e=document.createElement("img");e.src=`assets/cartas/${s}.png`,e.className="carta",o.append(e)},500),setTimeout(()=>{let s=m();n.cartas.push(s),n.valores.push($(s)),n.puntos+=$(s),i.innerText=n.puntos;let e=document.createElement("img");e.src=`assets/cartas/${s}.png`,e.className="carta",d.append(e),setTimeout(()=>{let s=m();n.cartas.push(s),n.valores.push($(s)),n.puntos+=$(s),N=s;let e=document.createElement("img");e.src="assets/cartas/red_back.png",e.className="carta",e.id="cartaVuelta",d.append(e),21!=t.puntos&&(r.disabled=!1),p.disabled=!1},500)},1e3),u.disabled=!0}),r.addEventListener("click",()=>{let s=m();"A"===s.substring(0,s.length-1)?t.puntos+$(s)>21?(t.cartas.push(s),t.valores.push($(s)),t.puntos+=1):(t.cartas.push(s),t.puntos+=11,t.valores.push($(s))):t.valores.includes(11)&&!t.useAs&&t.puntos+$(s)>21?(t.cartas.push(s),t.valores.push($(s)),t.puntos+=$(s)-10,t.useAs=!0):(t.cartas.push(s),t.valores.push($(s)),t.puntos+=$(s)),c.innerText=t.puntos;let e=document.createElement("img");e.src=`assets/cartas/${s}.png`,e.className="carta",o.append(e),21===t.puntos&&(c.className="blackjack",c.innerText=t.puntos+" - BlacJack",r.disabled=!0),t.puntos>21&&(document.querySelector("#cartaVuelta").src=`assets/cartas/${N}.png`,i.className="blackjack",i.innerText=n.puntos+" - GAN\xd3",c.className="perdio",c.innerText=t.puntos+" - PERDISTE",r.disabled=!0,p.disabled=!0)});let T=s=>{do{let e=m();if("A"===e.substring(0,e.length-1)?n.puntos+$(e)>21?(n.cartas.push(e),n.valores.push($(e)),n.puntos+=1):(n.cartas.push(e),n.valores.push($(e)),n.puntos+=11):n.valores.includes(11)&&!n.useAs&&n.puntos+$(e)>21?(n.cartas.push(e),n.valores.push($(e)),n.puntos+=$(e)-10,n.useAs=!0):(n.cartas.push(e),n.valores.push($(e)),n.puntos+=$(e)),setTimeout(()=>{i.innerText=n.puntos;let s=document.createElement("img");s.src=`assets/cartas/${e}.png`,s.className="carta",d.append(s),n.puntos>21&&(i.className="perdio",i.innerText=n.puntos+" - PERDI\xd3",c.className="blackjack",c.innerText=t.puntos+" - GANASTE"),21===n.puntos&&(i.className="blackjack",i.innerText=n.puntos+" - BlacJack",c.className="perdio",c.innerText=t.puntos+" - PERDISTE"),n.puntos>t.puntos&&n.puntos<21&&(i.className="blackjack",i.innerText=n.puntos+" - GAN\xd3",c.className="perdio",c.innerText=t.puntos+" - PERDISTE"),n.puntos===t.puntos&&n.puntos<21&&(i.className="blackjack",i.innerText=n.puntos+" - GAN\xd3",c.className="perdio",c.innerText=t.puntos+" - PERDISTE")},1e3),s>21)break}while(n.puntos<s&&s<=21)};p.addEventListener("click",()=>{if(document.querySelector("#cartaVuelta").src=`assets/cartas/${N}.png`,i.innerText=n.puntos,r.disabled=!0,p.disabled=!0,21===n.puntos){i.className="blackjack",i.innerText=n.puntos+" - GAN\xd3",c.className="perdio",c.innerText=t.puntos+" - PERDISTE";return}if(n.puntos>21){i.className="perdio",i.innerText=n.puntos+" - PERDI\xd3",c.className="blackjack",c.innerText=t.puntos+" - GANASTE";return}if(n.puntos>t.puntos&&n.puntos<21){i.className="blackjack",i.innerText=n.puntos+" - GAN\xd3",c.className="perdio",c.innerText=t.puntos+" - PERDISTE";return}T(t.puntos)}),l.addEventListener("click",()=>location.reload())})();